import{l as me,r as t,j as e,k as ue,n as W,E as Ve}from"./index-Dhfr7Mgv.js";import{F as H,c as $e,s as He,a as ge,e as Oe,t as Ue,u as Ke,v as ze,w as Qe,f as qe}from"./index-Cj-9IccM.js";import{a as O}from"./CButton-Cku8I2Fk.js";import{C as xe,a as je,b as ve,c as _e}from"./CModalHeader-CJCvLmYT.js";import{C as pe}from"./CFormInput-BVTt8IfD.js";import{C as Ee}from"./CFormSelect-DXw1A7qe.js";import{C as Ye,a as Ge,b as Pe,c as R,d as Je,e as T}from"./CTable-DsboRqTp.js";import{b as Xe,c as Ze,d as es,a as ss}from"./DefaultLayout-CQIqykMK.js";import{C as B}from"./CContainer-BKw8-WhC.js";import{C as Be,a as Q}from"./CPaginationItem-CtYQeeU9.js";import{C as ns,a as as,b as is,c as rs}from"./CAccordionHeader-Dzz2nJ4r.js";import{C as Re}from"./CCard-DFyHE6Ue.js";import{C as Te}from"./CCardHeader-CkX-1-Ni.js";import{C as We}from"./CCardBody-CaH4LJ6o.js";import{C as ts}from"./CAlert-DnAqXuMZ.js";import{C as cs,a as os,b as Me,c as Fe}from"./CTabList-DWNqCWaC.js";import"./index.esm-DloWyP-4.js";import"./1-B5_0tl7Z.js";import"./cil-user-Ddrdy7PS.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const ls=({shipment:i={},onSuccess:w=()=>{}})=>{const{showError:v,showSuccess:b}=me(),[M,D]=t.useState(!1),[_,k]=t.useState(!1),[f,L]=t.useState([]),[r,F]=t.useState([]),[p,I]=t.useState(null),[g,N]=t.useState(null),[A,x]=t.useState({items:0,amount:0}),S=async()=>{try{const s=await W.get("api/v1/vehicle");L(s.data.data||[])}catch{v("Error fetching vehicles")}},c=async()=>{try{const s=await W.get("api/v1/warehouseLoc/locations");F(s.data.data||[])}catch{v("Error fetching warehouse locations")}},E=()=>{D(!0),S(),c(),x({items:0,amount:0})},y=()=>{D(!1),I(null),N(null),x({items:0,amount:0})},P=s=>{const{name:d,value:h}=s.target;x(l=>({...l,[d]:h}))},a=async()=>{var s,d,h;if(!p){v("Please select a vehicle");return}if(!g){v("Please select a warehouse location");return}k(!0);try{const l={items:parseInt(A.items),type:"public",warehouse_id:g._id,warehouse_name:g.warehouseName,vehicle:{name:p.brand+" "+p.model,plate_no:p.regisNumber,driver_name:((s=p.assignedDriver)==null?void 0:s.driverName)||"No Driver Assigned"}};(await W.put(`https://log2_backend.chysev.cloud/api/v1/shipment/${i._id}`,l)).status===200&&(b("Successfully updated warehouse status"),y(),w&&w())}catch(l){v(((h=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:h.message)||"Error updating warehouse status")}finally{k(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{color:"primary",variant:"outline",className:"mb-3",onClick:E,disabled:i==null?void 0:i.isInWarehouse,children:[e.jsx(H,{icon:$e})," Warehouse"]}),e.jsxs(xe,{visible:M,onClose:y,backdrop:"static",children:[e.jsx(je,{closeButton:!0,children:e.jsx("h5",{children:"Update Warehouse Status"})}),e.jsx(ve,{children:e.jsxs("div",{className:"mb-3",children:[e.jsx(pe,{id:"tracking_id",label:"Tracking ID",type:"text",className:"form-control mb-3",floatingLabel:"Tracking ID",value:(i==null?void 0:i.tracking_id)||"",disabled:!0}),e.jsxs(Ee,{className:"mb-3",id:"warehouse_id",label:"Select Warehouse Location",floatingLabel:"Select Warehouse Location",value:(g==null?void 0:g._id)||"",onChange:s=>{const d=r.find(h=>h._id===s.target.value);N(d)},children:[e.jsx("option",{value:"",children:"Choose a warehouse location..."}),r.map(s=>e.jsxs("option",{value:s._id,children:[s.warehouseName," - ",s.address]},s._id))]}),e.jsxs(Ee,{className:"form-select mb-3",id:"vehicle_id",label:"Select Vehicle",floatingLabel:"Select Vehicle",value:(p==null?void 0:p._id)||"",onChange:s=>{const d=f.find(h=>h._id===s.target.value);I(d)},children:[e.jsx("option",{value:"",children:"Choose a vehicle..."}),f.filter(s=>s.status==="in_use").map(s=>e.jsxs("option",{value:s._id,children:[s.brand," ",s.model," - ",s.regisNumber,s.assignedDriver?` (Driver: ${s.assignedDriver.driverName})`:" (No Driver)"]},s._id))]}),e.jsx(pe,{type:"number",id:"items",label:"Number of Items",floatingLabel:"Number of Items",className:" mb-3",name:"items",value:A.items,onChange:P,min:"0"})]})}),e.jsxs(_e,{children:[e.jsx(O,{color:"secondary",variant:"outline",onClick:y,disabled:_,children:"Cancel"}),e.jsx(O,{color:"primary",variant:"outline",onClick:a,disabled:_||!p||!g,children:_?e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:"sm",className:"me-2"}),"Updating..."]}):"Update Status"})]})]})]})},ds=({shipment:i={},onSuccess:w=()=>{}})=>{const{showError:v,showSuccess:b}=me(),[M,D]=t.useState(!1),[_,k]=t.useState(!1),[f,L]=t.useState(0),r=()=>{D(!0),L((i==null?void 0:i.amount)||0)},F=()=>{D(!1),L(0)},p=g=>{const N=g.target.value;N>=0&&L(N)},I=async()=>{var g,N,A;if(!(i!=null&&i._id)){v("Invalid shipment data");return}if(f<=0){v("Please enter a valid amount");return}k(!0);try{const x=Ve(),c=(await W.get(`https://log2_backend.chysev.cloud/api/v1/shipment/${i._id}`)).data.shipment;console.log("Complete Shipment Data:",c);const E={shipper:{company_name:c.shipper.shipper_company_name,contact_name:c.shipper.shipper_contact_name,email:c.shipper.shipper_contact_email_address,phone:c.shipper.shipper_contact_phone_number,address:c.shipper.shipper_company_address},consignee:{company_name:c.consignee.consignee_company_name,contact_name:c.consignee.consignee_contact_name,email:c.consignee.consignee_contact_email_address,phone:c.consignee.consignee_contact_phone_number,address:c.consignee.consignee_company_address},shipment:{description:c.shipment.shipment_description,weight:c.shipment.shipment_weight,dimension:{length:c.shipment.shipment_dimension_length,width:c.shipment.shipment_dimension_width,height:c.shipment.shipment_dimension_height},tracking_id:c.tracking_id,isInWarehouse:!0,paid:"Paid",amount:parseFloat(f)},vehicle:{name:c.vehicle.name,plate_no:c.vehicle.plate_no,driver_name:c.vehicle.driver_name},warehouse_id:c.warehouse_id,shipping:{type:c.shipping.shipping_type},tracking_id:c.tracking_id,receiveDate:new Date().toISOString(),receiveBy:x};console.log("Receiving Data to be sent:",E);const y=await W.post("api/v1/receiving/add",E);console.log("createReceivingResponse",y);const P=await W.put(`https://log2_backend.chysev.cloud/api/v1/shipment/${i._id}`,{isInWarehouse:!0,paid:"Paid",amount:parseFloat(f)});y.status===201&&P.status===200&&(b("Shipment completed and copied to receiving successfully"),F(),w&&w())}catch(x){console.error("Error details:",(g=x.response)==null?void 0:g.data),v(((A=(N=x==null?void 0:x.response)==null?void 0:N.data)==null?void 0:A.message)||"Error completing shipment")}finally{k(!1)}};return(i==null?void 0:i.paid)==="Paid"?null:e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"mb-2",color:"success",variant:"outline",onClick:r,disabled:_||(i==null?void 0:i.warehouse_id)==="",children:[e.jsx(H,{icon:He,className:"me-1"}),"Complete"]}),e.jsxs(xe,{visible:M,onClose:F,backdrop:"static",children:[e.jsx(je,{closeButton:!0,children:e.jsx("h5",{children:"Complete Shipment"})}),e.jsx(ve,{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{children:"Shipment Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tracking ID:"})," ",i==null?void 0:i.tracking_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Status:"})," ",i==null?void 0:i.paid]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"amount",className:"form-label",children:e.jsx("strong",{children:"Amount"})}),e.jsx(pe,{type:"number",className:"mb-3",floatingLabel:"Amount",id:"amount",value:f,onChange:p,min:"0",step:"0.01",placeholder:"Enter amount",required:!0}),e.jsx("small",{className:"text-muted",children:"Please enter the final amount for this shipment"})]}),e.jsx("div",{className:"alert alert-info mt-3",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Note:"})," This action will:",e.jsxs("ul",{className:"mb-0",children:[e.jsx("li",{children:"Mark the shipment as “Paid“"}),e.jsx("li",{children:"Update warehouse status to “In Warehouse“"}),e.jsxs("li",{children:["Set the final amount to ",f]})]})]})})]})}),e.jsxs(_e,{children:[e.jsx(O,{color:"secondary",variant:"outline",className:"mb-3",onClick:F,disabled:_,children:"Cancel"}),e.jsx(O,{className:"mb-3",color:"primary",variant:"outline",onClick:I,disabled:_||f<=0,children:_?e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:"sm",className:"me-2"}),"Completing..."]}):"Complete Shipment"})]})]})]})},hs=()=>{var V,$,q,Y,G,J,X,Z,ee,se,ne,ae,ie,re,te,ce,oe,le,de;const{showError:i,showSuccess:w}=me(),[v,b]=t.useState(!1),[M,D]=t.useState(null),[_,k]=t.useState([]),[f,L]=t.useState(""),[r,F]=t.useState(null),[p,I]=t.useState(!1),[g,N]=t.useState(!1),[A,x]=t.useState([]),[S,c]=t.useState(1),[E]=t.useState(10),y=async()=>{var n,o,C,m;b(!0);try{const j=await W.get("https://log2_backend.chysev.cloud/api/v1/shipment");if(console.log(j.data),j.status===200){const z=j.data.shipments||[];k(z),D(null)}}catch(j){D(((o=(n=j==null?void 0:j.response)==null?void 0:n.data)==null?void 0:o.message)||"Error fetching data"),i(((m=(C=j==null?void 0:j.response)==null?void 0:C.data)==null?void 0:m.message)||"Error fetching data")}finally{b(!1)}};t.useEffect(()=>{(async()=>{var o,C;try{const m=await W.get("/api/v1/warehouseLoc/locations");m.data.data&&(x(m.data.data),w(m.data.message))}catch(m){setLocalError((o=m==null?void 0:m.response)==null?void 0:o.data.message),i(((C=m==null?void 0:m.response)==null?void 0:C.data.message)||"Error fetching warehouses")}})()},[]);const P=n=>{if(!A.length)return"Loading...";const o=A.find(C=>C._id===n);return o?o.warehouseName:"Not Yet Assigned"},a=_.filter(n=>{var C,m,j,z,he,fe,Ce,ye,we,Se,Ne,be,De,ke,Le,Ie,Ae;const o=f.toLowerCase();return((C=n.tracking_id)==null?void 0:C.toLowerCase().includes(o))||((j=(m=n.shipper)==null?void 0:m.shipper_company_name)==null?void 0:j.toLowerCase().includes(o))||((he=(z=n.consignee)==null?void 0:z.consignee_company_name)==null?void 0:he.toLowerCase().includes(o))||((fe=n.type)==null?void 0:fe.toLowerCase().includes(o))||((Ce=n.dispatch)==null?void 0:Ce.toLowerCase().includes(o))||((ye=n.paid)==null?void 0:ye.toLowerCase().includes(o))||((Se=(we=n.vehicle)==null?void 0:we.driver_name)==null?void 0:Se.toLowerCase().includes(o))||((be=(Ne=n.vehicle)==null?void 0:Ne.vehicle_plate_no)==null?void 0:be.toLowerCase().includes(o))||((ke=(De=n.vehicle)==null?void 0:De.name)==null?void 0:ke.toLowerCase().includes(o))||((Ie=(Le=n.vehicle)==null?void 0:Le.plate_no)==null?void 0:Ie.toLowerCase().includes(o))||((Ae=P(n.warehouse_id))==null?void 0:Ae.toLowerCase().includes(o))}),s=S*E,d=s-E,h=a.slice(d,s),l=Math.ceil(a.length/E),u=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",U=n=>{switch(n==null?void 0:n.toLowerCase()){case"pending":return"warning";case"dispatching":return"info";case"completed":return"success";case"unpaid":return"danger";case"paid":return"success";case"void":return"secondary";default:return"primary"}},K=n=>{try{const o=_.find(C=>C.tracking_id===n);F(o),I(!0)}catch{i("Error viewing shipment details")}};return t.useEffect(()=>{y()},[]),v?e.jsx("div",{className:"d-flex justify-content-center p-4",children:e.jsx(ue,{})}):M?e.jsx("div",{className:"alert alert-danger",role:"alert",children:M}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(pe,{type:"text",className:"mb-2",id:"searchInput",placeholder:"Search shipments...",value:f,onChange:n=>L(n.target.value)})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"text-end",children:e.jsxs("span",{className:"text-muted",children:["Total Records:"," ",a.filter(n=>!n.isInWarehouse).length]})})})]})}),Array.isArray(_)&&_.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{hover:!0,responsive:!0,children:[e.jsx(Ge,{children:e.jsxs(Pe,{children:[e.jsx(R,{children:"Tracking ID"}),e.jsx(R,{children:"Type"}),e.jsx(R,{children:"Payment Status"}),e.jsx(R,{children:"Shipper"}),e.jsx(R,{children:"Consignee"}),e.jsx(R,{children:"Shipping Type"}),e.jsx(R,{children:"Vehicle"}),e.jsx(R,{children:"Driver"}),e.jsx(R,{children:"Storage Warehouse"}),e.jsx(R,{children:"Actions"})]})}),e.jsx(Je,{children:h.filter(n=>!n.isInWarehouse).map(n=>{var o,C,m,j,z,he;return e.jsxs(Pe,{children:[e.jsx(T,{children:n.tracking_id}),e.jsx(T,{children:e.jsx(ge,{color:"primary",children:n.type||"N/A"})}),e.jsx(T,{children:e.jsx(ge,{color:U(n.paid),children:n.paid||"N/A"})}),e.jsx(T,{children:((o=n.shipper)==null?void 0:o.shipper_company_name)||"N/A"}),e.jsx(T,{children:((C=n.consignee)==null?void 0:C.consignee_company_name)||"N/A"}),e.jsx(T,{children:e.jsx(ge,{color:"info",children:((m=n.shipping)==null?void 0:m.shipping_type)||"N/A"})}),e.jsx(T,{children:(j=n.vehicle)!=null&&j.name&&((z=n.vehicle)!=null&&z.plate_no)?`${n.vehicle.name} (${n.vehicle.plate_no})`:"N/A"}),e.jsx(T,{children:((he=n.vehicle)==null?void 0:he.driver_name)||"N/A"}),e.jsx(T,{children:P(n.warehouse_id)||"N/A"}),e.jsx(T,{children:e.jsxs(Xe,{children:[e.jsx(Ze,{color:"secondary",size:"sm",children:"Actions"}),e.jsx(es,{children:e.jsxs(B,{children:[e.jsx(O,{color:"info",variant:"outline",className:"mb-3",onClick:()=>K(n.tracking_id),children:"View"}),e.jsx(ls,{shipment:n,onSuccess:y}),e.jsx(ds,{shipment:n,onSuccess:y})]})})]})})]},n.tracking_id)})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-muted",children:["Showing ",d+1," to"," ",Math.min(s,a.length)," of"," ",a.filter(n=>!n.isInWarehouse).length," entries"]})}),e.jsxs(Be,{"aria-label":"Page navigation",children:[e.jsx(Q,{"aria-label":"Previous",disabled:S===1,onClick:()=>c(S-1),children:e.jsx("span",{"aria-hidden":"true",children:"Previous"})}),[...Array(l)].map((n,o)=>e.jsx(Q,{active:S===o+1,onClick:()=>c(o+1),children:o+1},o+1)),e.jsx(Q,{"aria-label":"Next",disabled:S===l,onClick:()=>c(S+1),children:e.jsx("span",{"aria-hidden":"true",children:"Next"})})]})]})]}):e.jsx("div",{className:"text-center p-4",children:"No shipment records found"}),e.jsxs(xe,{visible:p,onClose:()=>I(!1),size:"lg",children:[e.jsx(je,{closeButton:!0,children:e.jsx("h5",{children:"Shipment Details"})}),e.jsx(ve,{children:r&&e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Basic Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tracking ID:"})," ",r.tracking_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Receive Date:"})," ",u(r.receiveDate)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",r.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dispatch Status:"})," ",r.dispatch]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Status:"})," ",r.paid]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Shipping Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping Type:"})," ",(V=r.shipping)==null?void 0:V.shipping_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," ",r.items]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",r.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",r.country]})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Shipper Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",($=r.shipper)==null?void 0:$.shipper_company_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",(q=r.shipper)==null?void 0:q.shipper_contact_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(Y=r.shipper)==null?void 0:Y.shipper_contact_email_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(G=r.shipper)==null?void 0:G.shipper_contact_phone_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(J=r.shipper)==null?void 0:J.shipper_company_address]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Consignee Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",(X=r.consignee)==null?void 0:X.consignee_company_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",(Z=r.consignee)==null?void 0:Z.consignee_contact_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(ee=r.consignee)==null?void 0:ee.consignee_contact_email_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(se=r.consignee)==null?void 0:se.consignee_contact_phone_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(ne=r.consignee)==null?void 0:ne.consignee_company_address]})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{children:"Shipment Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",(ae=r.shipment)==null?void 0:ae.shipment_description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Weight:"})," ",(ie=r.shipment)==null?void 0:ie.shipment_weight," kg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dimensions:"})," ",(re=r.shipment)==null?void 0:re.shipment_dimension_length," x"," ",(te=r.shipment)==null?void 0:te.shipment_dimension_width," x"," ",(ce=r.shipment)==null?void 0:ce.shipment_dimension_height," cm"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Volume:"})," ",(oe=r.shipment)==null?void 0:oe.shipment_volume," m³"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Value:"})," ",(le=r.shipment)==null?void 0:le.shipment_value]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Instructions:"})," ",(de=r.shipment)==null?void 0:de.shipment_instructions]})]})})]})}),e.jsx(_e,{children:e.jsx(O,{color:"secondary",variant:"outline",onClick:()=>I(!1),children:"Close"})})]})]})},ps=()=>{const{showSuccess:i,showError:w}=me(),[v,b]=t.useState([]),[M,D]=t.useState([]),[_,k]=t.useState(!0),[f,L]=t.useState(null),[r,F]=t.useState(""),[p,I]=t.useState(1),[g]=t.useState(10);t.useEffect(()=>{N()},[]);const N=async()=>{var a,s,d,h;try{k(!0);const l=await W.get("/api/v1/receiving/all");b(l.data.data),i("Receiving history loaded successfully")}catch(l){console.error("Error fetching receiving data:",l),L(((s=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:s.message)||"Error fetching data"),w(((h=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:h.message)||"Error fetching receiving history")}finally{k(!1)}};t.useEffect(()=>{(async()=>{var s,d,h,l;try{const u=await W.get("/api/v1/warehouseLoc/locations");u.data.data&&D(u.data.data)}catch(u){L((d=(s=u==null?void 0:u.response)==null?void 0:s.data)==null?void 0:d.message),w(((l=(h=u==null?void 0:u.response)==null?void 0:h.data)==null?void 0:l.message)||"Error fetching warehouses")}})()},[]);const A=a=>{if(!M.length)return"Loading...";const s=M.find(d=>d._id===a);return s?s.warehouseName:"N/A"},x=v.filter(a=>{var d,h,l,u,U,K,V,$;const s=r.toLowerCase();return((d=a.tracking_id)==null?void 0:d.toLowerCase().includes(s))||((l=(h=a.shipper)==null?void 0:h.company_name)==null?void 0:l.toLowerCase().includes(s))||((U=(u=a.consignee)==null?void 0:u.company_name)==null?void 0:U.toLowerCase().includes(s))||((V=(K=a.vehicle)==null?void 0:K.name)==null?void 0:V.toLowerCase().includes(s))||(($=a.receiveBy)==null?void 0:$.toLowerCase().includes(s))}),S=p*g,c=S-g,E=x.slice(c,S),y=Math.ceil(x.length/g),P=a=>{I(a)};return _?e.jsx("div",{className:"text-center py-5",children:"Loading..."}):e.jsxs("div",{className:"container-fluid px-4",children:[e.jsx("h1",{className:"mt-4",children:"Receiving History"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:e.jsx(H,{icon:Oe})}),e.jsx(pe,{placeholder:"Search by tracking ID, company, receiver...",value:r,onChange:a=>F(a.target.value)})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(ns,{children:E.map((a,s)=>{var d,h,l,u,U,K,V,$,q,Y,G,J,X,Z,ee,se,ne,ae,ie,re,te,ce,oe,le,de;return e.jsxs(as,{children:[e.jsx(is,{children:e.jsxs("div",{className:"d-flex justify-content-between w-100 me-3",children:[e.jsxs("span",{children:[e.jsx(H,{icon:Ue,className:"me-2"}),"Tracking ID: ",(d=a.shipment)==null?void 0:d.tracking_id]}),e.jsxs("span",{children:["Received: ",new Date(a.receiveDate).toLocaleDateString()]})]})}),e.jsx(rs,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs(B,{children:[e.jsxs(B,{children:[e.jsx(H,{icon:Ke,className:"me-2"}),"Shipper Information"]}),e.jsxs(B,{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",(h=a.shipper)==null?void 0:h.company_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",(l=a.shipper)==null?void 0:l.contact_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(u=a.shipper)==null?void 0:u.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(U=a.shipper)==null?void 0:U.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(K=a.shipper)==null?void 0:K.address]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs(B,{children:[e.jsxs(B,{children:[e.jsx(H,{icon:ze,className:"me-2"}),"Consignee Information"]}),e.jsxs(B,{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",(V=a.consignee)==null?void 0:V.company_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",($=a.consignee)==null?void 0:$.contact_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(q=a.consignee)==null?void 0:q.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(Y=a.consignee)==null?void 0:Y.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(G=a.consignee)==null?void 0:G.address]})]})]})}),e.jsx(B,{className:"col-md-6",children:e.jsxs(Re,{children:[e.jsxs(Te,{children:[e.jsx(H,{icon:Qe,className:"me-2"}),"Shipment Details"]}),e.jsxs(We,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",(J=a.shipment)==null?void 0:J.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Weight:"})," ",(X=a.shipment)==null?void 0:X.weight," kg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dimensions:"})," ",(ee=(Z=a.shipment)==null?void 0:Z.dimension)==null?void 0:ee.length," x"," ",(ne=(se=a.shipment)==null?void 0:se.dimension)==null?void 0:ne.width," x ",(ie=(ae=a.shipment)==null?void 0:ae.dimension)==null?void 0:ie.height," ","cm"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Warehouse:"})," ",A(a.warehouse_id)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",(re=a.shipment)==null?void 0:re.paid]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," $",(te=a.shipment)==null?void 0:te.amount]})]})]})}),e.jsx(B,{className:"col-md-6",children:e.jsxs(Re,{children:[e.jsxs(Te,{children:[e.jsx(H,{icon:qe,className:"me-2"}),"Vehicle & Shipping Information"]}),e.jsxs(We,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Vehicle:"})," ",(ce=a.vehicle)==null?void 0:ce.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plate No:"})," ",(oe=a.vehicle)==null?void 0:oe.plate_no]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Driver:"})," ",(le=a.vehicle)==null?void 0:le.driver_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping Type:"})," ",(de=a.shipping)==null?void 0:de.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Received By:"})," ",a.receiveBy]})]})]})})]})})]},a._id||s)})}),x.length>g&&e.jsxs(Be,{className:"mt-4 justify-content-center","aria-label":"Page navigation",children:[e.jsx(Q,{onClick:()=>P(p-1),disabled:p===1,children:"Previous"}),[...Array(y)].map((a,s)=>e.jsx(Q,{active:p===s+1,onClick:()=>P(s+1),children:s+1},s+1)),e.jsx(Q,{onClick:()=>P(p+1),disabled:p===y,children:"Next"})]})]})}),f&&e.jsx(ts,{color:"danger",children:f})]})},Ps=()=>{const[i,w]=t.useState(0),v=()=>{w(b=>b+1)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Receiving Items"}),e.jsxs(cs,{activeItemKey:"Receiving",children:[e.jsxs(os,{variant:"tabs",children:[e.jsx(Me,{itemKey:"Receiving",children:"Receiving"}),e.jsx(Me,{itemKey:"Receiving History",children:"Receiving History"})]}),e.jsxs(ss,{children:[e.jsx(Fe,{className:"p-3",itemKey:"Receiving",children:e.jsx(hs,{onSuccess:v})}),e.jsx(Fe,{className:"p-3",itemKey:"Receiving History",children:e.jsx(ps,{},i)})]})]})]})};export{Ps as default};
