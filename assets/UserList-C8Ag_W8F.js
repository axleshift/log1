import{w as A,r,j as e}from"./index-nNgQDi3y.js";import{F as k,c as F}from"./index-DA9UjPMh.js";import{C as N}from"./CContainer-XXKGP3D5.js";import{C as v,a as R}from"./CInputGroupText-I3x9P6oS.js";import{C as B}from"./CFormInput-C49UErcb.js";import{C as H}from"./CCard-C11t10-G.js";import{C as M}from"./CCardHeader-Ckjf93UD.js";import{C as z}from"./CCardBody-D9zCfA2H.js";import{C as G,a as O,b as g,c,d as Q,e as n}from"./CTable-DW5YpC_1.js";import{C as D}from"./CAlert-Da4UQtJl.js";import{C as W,a as h}from"./CPaginationItem-NLfdk3wV.js";import"./CCloseButton-U_0zd53e.js";import"./CLink-B-ouRo4I.js";const oe=()=>{const C=sessionStorage.getItem("accessToken"),w=A.create({baseURL:"http://localhost:5057",withCredentials:!0,headers:{"Content-Type":"application/json",...C&&{Authorization:`Bearer ${C}`}}}),l=10,[a,o]=r.useState(1),[i,L]=r.useState([]),[t,b]=r.useState(""),[x,u]=r.useState([]),[p,j]=r.useState(""),y=async()=>{try{const s=await w.get("/api/v1/user/all-user");L(s.data.data)}catch(s){console.error("Error fetching users:",s)}};r.useEffect(()=>{y()},[]),r.useEffect(()=>{if(t==="")u(i);else{const s=i.filter(m=>{const E=m.username.toLowerCase().includes(t.toLowerCase()),T=m.email.toLowerCase().includes(t.toLowerCase()),U=m.role.toLowerCase().includes(t.toLowerCase());return E||T||U});u(s),o(1),s.length>0?j(null):j("No matching users found")}},[t,i]);const I=s=>{b(s.target.value)},f=a*l,P=f-l,S=x.slice(P,f),d=Math.ceil(x.length/l);return e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"m-3",children:e.jsxs(v,{className:"w-50 mb-3",children:[e.jsx(B,{type:"text",id:"search",value:t,onChange:I,placeholder:"Search Warehouse Location..."}),e.jsx(R,{children:e.jsx(k,{icon:F})})]})}),e.jsxs(H,{className:"m-3 text-center",size:"sm",children:[e.jsx(M,{children:e.jsx("h4",{children:"User List"})}),e.jsxs(z,{children:[e.jsxs(G,{children:[e.jsx(O,{children:e.jsxs(g,{children:[e.jsx(c,{scope:"col",children:"Username"}),e.jsx(c,{scope:"col",children:"Email"}),e.jsx(c,{scope:"col",children:"Role"}),e.jsx(c,{scope:"col",children:"Created At"})]})}),e.jsx(Q,{children:S.map(s=>e.jsxs(g,{children:[e.jsx(n,{children:s.username}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.role}),e.jsx(n,{children:s.createdAt.slice(0,10)})]},s._id))})]}),p&&e.jsx(D,{color:"danger",className:"text-center mt-5 w-75 mx-auto justify-content-center",children:p}),e.jsxs(W,{align:"center",children:[e.jsx(h,{disabled:a===1,onClick:()=>o(s=>Math.max(s-1,1)),children:"Previous"}),[...Array(d).keys()].map(s=>e.jsx(h,{active:s+1===a,onClick:()=>o(s+1),children:s+1},s+1)),e.jsx(h,{disabled:a===d,onClick:()=>o(s=>Math.min(s+1,d)),children:"Next"})]})]})]})]})};export{oe as default};
