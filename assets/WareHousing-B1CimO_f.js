import{r as a,_ as z,R as P,a as W,c as O,P as b,j as e,C as B,i as M,x as H}from"./index-jiNyKwsp.js";import{F as K,j as Ie,h as we,g as J,i as Se,b as ke}from"./index-DFyN7MmU.js";import{a as k,C as le}from"./CForm-DqhKtZxf.js";import{a as E}from"./CButton-BYhtaUES.js";import{C as de,a as me,b as ue,c as he,d as fe}from"./CModalTitle-CoYR5CZO.js";import{c as xe,C as U}from"./CFormInput-Aogae6Re.js";import{C as pe}from"./CFormSelect-kO3egkmH.js";import{C as q}from"./CContainer-DTmQoVhq.js";import{C as G,a as X}from"./CInputGroupText-vwwZNSfW.js";import{C as Te,a as Ae,b as Le,c as Pe}from"./CAccordionHeader-D_yOs315.js";import{g as qe,C as F,a as Ee}from"./DefaultLayout-Cmm6rABs.js";import{C as ye,a as je,b as Q,c as T,d as ge,e as A}from"./CTable-ChCIrykH.js";import{C as be,a as R}from"./CPaginationItem-D6lPLeSz.js";import{u as Ne,T as Fe}from"./CCloseButton-BXXgN7mW.js";import{g as Re}from"./getTransitionDurationFromElement-Cpu4p4hx.js";import{C as te}from"./CCard-DdcUPz_T.js";import"./index.esm-CbrbfJev.js";import"./cil-user-Ddrdy7PS.js";import"./CImage-BSkrlDg4.js";var V=a.forwardRef(function(t,m){var y=t.children,u=t.className,d=t.feedback,l=t.feedbackInvalid,j=t.feedbackValid,h=t.floatingClassName,p=t.floatingLabel,i=t.id,N=t.invalid,x=t.label,w=t.plainText,r=t.text,f=t.tooltipFeedback,c=t.valid,C=z(t,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return P.createElement(xe,{describedby:C["aria-describedby"],feedback:d,feedbackInvalid:l,feedbackValid:j,floatingClassName:h,floatingLabel:p,id:i,invalid:N,label:x,text:r,tooltipFeedback:f,valid:c},P.createElement("textarea",W({className:O(w?"form-control-plaintext":"form-control",{"is-invalid":N,"is-valid":c},u),id:i},C,{ref:m}),y))});V.propTypes=W({className:b.string,id:b.string,plainText:b.bool},xe.propTypes);V.displayName="CFormTextarea";var Y=a.createContext({}),Z=a.forwardRef(function(t,m){var y=t.children,u=t.activeItemKey,d=t.className,l=t.onChange,j=a.useId(),h=a.useState(u),p=h[0],i=h[1];return a.useEffect(function(){p&&l&&l(p)},[p]),P.createElement(Y.Provider,{value:{_activeItemKey:p,setActiveItemKey:i,id:j}},P.createElement("div",{className:O("tabs",d),ref:m},y))});Z.propTypes={activeItemKey:b.oneOfType([b.number,b.string]).isRequired,children:b.node,className:b.string,onChange:b.func};Z.displayName="CTabs";var $=a.forwardRef(function(t,m){var y=t.children,u=t.className,d=t.itemKey,l=z(t,["children","className","itemKey"]),j=a.useContext(Y),h=j._activeItemKey,p=j.setActiveItemKey,i=j.id,N=function(){return d===h};return P.createElement("button",W({className:O("nav-link",{active:N()},u),id:"".concat(i).concat(d,"-tab"),onClick:function(){return p(d)},onFocus:function(){return p(d)},role:"tab",tabIndex:N()?0:-1,type:"button","aria-controls":"".concat(i).concat(d,"-tab-pane"),"aria-selected":N(),ref:m},l),y)});$.propTypes={children:b.node,className:b.string,disabled:b.bool,itemKey:b.oneOfType([b.number,b.string]).isRequired};$.displayName="CTab";var D=a.forwardRef(function(t,m){var y=t.children,u=t.className,d=t.itemKey,l=t.onHide,j=t.onShow,h=t.transition,p=h===void 0?!0:h,i=t.visible,N=z(t,["children","className","itemKey","onHide","onShow","transition","visible"]),x=a.useContext(Y),w=x._activeItemKey,r=x.id,f=a.useRef(),c=Ne(m,f),C=a.useState(i||w===d),v=C[0],n=C[1];return a.useEffect(function(){i!==void 0&&n(i)},[i]),a.useEffect(function(){n(w===d)},[w]),P.createElement(Fe,{in:v,nodeRef:f,onEnter:j,onExit:l,timeout:f.current?Re(f.current):0},function(s){return P.createElement("div",W({className:O("tab-pane",{active:v,fade:p,show:s==="entered"},u),id:"".concat(r).concat(d,"-tab-pane"),role:"tabpanel","aria-labelledby":"".concat(r).concat(d,"-tab"),tabIndex:0,ref:c},N),y)})});D.propTypes={children:b.node,className:b.string,itemKey:b.oneOfType([b.number,b.string]).isRequired,onHide:b.func,onShow:b.func,transition:b.bool,visible:b.bool};D.displayName="CTabPanel";var ee=a.forwardRef(function(t,m){var y,u=t.children,d=t.className,l=t.layout,j=t.variant,h=z(t,["children","className","layout","variant"]),p=a.useRef(null),i=Ne(m,p),N=function(x){if(p.current!==null&&(x.key==="ArrowDown"||x.key==="ArrowUp"||x.key==="ArrowLeft"||x.key==="ArrowRight"||x.key==="Home"||x.key==="End")){x.preventDefault();var w=x.target,r=Array.from(p.current.querySelectorAll(".nav-link:not(.disabled):not(:disabled)")),f=void 0;x.key==="Home"||x.key==="End"?f=x.key==="End"?r.at(-1):r[0]:f=qe(r,w,x.key==="ArrowDown"||x.key==="ArrowRight",!0),f&&f.focus({preventScroll:!0})}};return P.createElement("div",W({className:O("nav",(y={},y["nav-".concat(l)]=l,y["nav-".concat(j)]=j,y),d),role:"tablist",onKeyDown:N,ref:i},h),u)});ee.propTypes={children:b.node,className:b.string,layout:b.oneOf(["fill","justified"]),variant:b.oneOf(["pills","tabs","underline","underline-border"])};ee.displayName="CTabList";const se=sessionStorage.getItem("accessToken"),Ke="http://localhost:5057",$e=M.create({baseURL:Ke,withCredentials:!0,headers:{"Content-Type":"application/json",...se&&{Authorization:`Bearer ${se}`}}}),De=({warehousing:t,onDeleteItem:m})=>{const[y,u]=a.useState(null),[d,l]=a.useState(!1),j=async()=>{l(!0);const h=await $e.delete(`/api/v1/warehouse/delete/${t._id}`);h.status===200?(alert("Item deleted successfully"),m(t._id),l(!1),u(null)):(l(!1),u(h.data.message))};return y?e.jsxs(k,{color:"danger",className:"text-center mt-5 w-75 mx-auto",children:["Error: ",y.message]}):e.jsx(e.Fragment,{children:e.jsx(E,{color:"danger",variant:"outline",onClick:j,className:"me-2",children:d?e.jsx(B,{size:"sm"}):e.jsx(K,{icon:Ie})})})},ae=sessionStorage.getItem("accessToken"),We="http://localhost:5057",re=M.create({baseURL:We,withCredentials:!0,headers:{"Content-Type":"application/json",...ae&&{Authorization:`Bearer ${ae}`}}}),Oe=({warehousing:t,onUpdateItem:m})=>{const[y,u]=a.useState(null),[d,l]=a.useState(!1),[j,h]=a.useState(null),[p,i]=a.useState(!1),[N,x]=a.useState([]),w=new Date().toISOString().split("T")[0];JSON.parse(sessionStorage.getItem("user"));const[r,f]=a.useState({from:t.from,items:t.items,dateArrival:w,warehouse:t.warehouse,status:t.status});a.useEffect(()=>{(async()=>{try{const n=await re.get("/api/v1/warehouseLoc/locations");x(n.data.data)}catch(n){u(n.response.data.message)}})()},[]);const c=v=>{const{id:n,value:s}=v.target;f(o=>{if(["length","width","height"].includes(n)){const g=s===""?"":Math.max(1,Number(s));return{...o,[n]:g}}if(n==="items"){const g=JSON.parse(s);return{...o,items:g}}return{...o,[n]:s}})},C=async v=>{v.preventDefault();const s=JSON.parse(sessionStorage.getItem("user")).email;if(!s){u("User email not found. Please log in again.");return}l(!0);try{const o=await re.put(`/api/v1/warehouse/update/${t._id}`,{...r,byReceived:s});if(o.status===200){const g=o.data.data,I=N.find(S=>S._id===g.warehouse);g.warehouse=I,h(o.data.message),m(o.data.data),setTimeout(()=>{h(null),i(!1)},2e3)}}catch(o){u(o.response.data.message),setTimeout(()=>{u(null)},2e3)}l(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{color:"primary",variant:"outline",className:"me-2",onClick:()=>i(!0),children:d?e.jsx(B,{size:"sm"}):e.jsx(K,{icon:we})}),e.jsxs(de,{visible:p,onClose:()=>i(!1),children:[e.jsx(me,{children:e.jsx(ue,{children:"Recieved Items"})}),y&&e.jsx(k,{color:"danger",children:y}),j&&e.jsx(k,{color:"success",children:j}),e.jsx(he,{children:e.jsxs(le,{children:[e.jsx(U,{type:"text",placeholder:"From",className:"mb-3",floatingLabel:"From",id:"from",onChange:c,value:r.from,required:!0,readOnly:!0}),e.jsx(V,{placeholder:"Items List",className:"mb-3 justify-content-center h-50",floatingLabel:"Items List",id:"items",rows:5,value:Array.isArray(r.items)?r.items.map((v,n)=>`${n+1}. ${v.itemName} (Quantity: ${v.quantity})`).join(`
`):r.items,readOnly:!0}),e.jsxs(pe,{placeholder:"Warehouse",className:"mb-3",floatingLabel:"Warehouse",id:"warehouse",onChange:c,value:r.warehouse._id,required:!0,children:[e.jsx("option",{value:null,children:"Select Warehouse"}),N.map(v=>e.jsx("option",{value:v._id,children:v.warehouseName},v._id))]})]})}),e.jsxs(fe,{children:[e.jsx(E,{color:"secondary",variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(E,{color:"primary",variant:"outline",onClick:C,children:"Update Item"})]})]})]})},Be=({warehousing:t,loading:m,error:y,onDeleteItem:u,onUpdateItem:d})=>{const[l,j]=a.useState([]),[h,p]=a.useState(null),[i,N]=a.useState(""),x=JSON.parse(sessionStorage.getItem("user")),w=["manager","admin"];a.useEffect(()=>{const c=setTimeout(()=>{try{if(!i.trim()){j(t),p(null);return}const C=i.toLowerCase().trim(),v=t.filter(n=>n.PoNumber&&n.PoNumber.toLowerCase().includes(C)||n.from&&n.from.toLowerCase().includes(C)||n.dateArrival&&r(n.dateArrival).includes(C)?!0:Array.isArray(n.items)?n.items.some(s=>s.itemName&&s.itemName.toLowerCase().includes(C)||s.quantity&&s.quantity.toString().includes(C)):!1);j(v),p(v.length===0?"No items found":null)}catch(C){console.error("Search error:",C),p("An error occurred while searching")}},300);return()=>clearTimeout(c)},[i,t]);const r=c=>new Date(c).toLocaleDateString(),f=c=>{N(c.target.value)};return m?e.jsx(B,{color:"primary",className:"mt-5 w-15 mx-auto justify-content-center"}):t.length===0?e.jsx(k,{color:"warning",className:"text-center mt-5 w-75 mx-auto",children:"No data available"}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mt-3",children:e.jsxs(G,{className:"w-50 mb-3",children:[e.jsx(U,{type:"text",placeholder:"Search Items...",value:i,id:"searchItem",onChange:f}),e.jsx(X,{children:e.jsx(K,{icon:J})})]})}),y&&e.jsx(k,{color:"danger",className:"text-center mt-5 w-75 mx-auto",children:y}),h&&e.jsx(k,{color:"danger",className:"text-center mt-5 w-75 mx-auto",children:h}),e.jsx(Te,{className:"m-2 ",children:l.map(c=>e.jsxs(Ae,{children:[e.jsx(Le,{children:e.jsxs("ul",{className:"list-unstyled p-0 m-0 w-100",children:[e.jsxs("li",{children:["From: ",e.jsx("strong",{children:c.from})]}),e.jsxs("li",{children:["Purcahse Order: ",e.jsx("strong",{children:c.PoNumber})]})]})}),e.jsxs(Pe,{children:[c.items.map((C,v)=>e.jsx("div",{children:e.jsx(F,{children:`Item name: ${C.itemName} Quantity: (${C.quantity})`})},v)),e.jsxs(F,{children:["Date receive: ",new Date(c.dateArrival).toLocaleDateString()]}),e.jsxs(F,{children:["Received By: ",c.byReceived]}),e.jsxs(F,{children:["Warehouse: ",c.warehouse?c.warehouse.warehouseName:"Unknown"]}),e.jsxs(q,{className:"d-flex justify-content-end mt-3",children:[e.jsx(Oe,{warehousing:c,onUpdateItem:d}),w.includes(x.role)&&e.jsx(De,{warehousing:c,onDeleteItem:u})]})]})]},c._id))})]})},Me=({onAddItem:t,item:m={}})=>{a.useEffect(()=>{const n=sessionStorage.getItem("accessToken");console.log("Current token:",n)},[]);const[y,u]=a.useState("Add Item"),[d,l]=a.useState(!1),[j,h]=a.useState(!1),[p,i]=a.useState(""),[N,x]=a.useState([]),w=new Date().toISOString().split("T")[0],[r,f]=a.useState({from:m.from,items:m.items,PoNumber:m.PoNumber,dateArrival:w,warehouse:"",byReceived:""}),c=n=>{const{id:s,value:o}=n.target;f(g=>({...g,[s]:o}))},C=async n=>{try{return(await H.get(`/api/v1/warehouse/checkPoNumber/${n}`)).data.exists}catch(s){return console.error(s),!1}};a.useEffect(()=>{(async()=>{await C(m.PoNumber)&&u("Already Added")})()},[m.PoNumber]),a.useEffect(()=>{(async()=>{try{const s=await H.get("/api/v1/warehouseLoc/locations");x(s.data.data)}catch(s){i(s.response.data.message)}})()},[]),m.items&&m.items.map((n,s)=>`${s+1}. Item Name: (${n.itemName})    Quantity: (${n.quantity})`).join(`
`);const v=async n=>{var g,I;n.preventDefault(),console.log("Request headers:",H.defaults.headers),console.log("Form data:",r);const o=JSON.parse(sessionStorage.getItem("user")).email;if(!o){i("User email not found. Please log in again.");return}try{const S=await H.post("/api/v1/warehouse/addItem",{...r,byReceived:o});if(S.status===201){const L=S.data.data,_=N.find(Ce=>Ce._id===L.warehouse);L.warehouse=_,l(S.data.message),t(L),u("Already Added"),setTimeout(()=>{h(!1),l("")},1500)}else i(S.data.message||"An unexpected error occurred")}catch(S){i(((I=(g=S.response)==null?void 0:g.data)==null?void 0:I.message)||S.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{color:"primary",variant:"outline",onClick:()=>h(!0),disabled:y==="Already Added",children:y==="Already Added"?e.jsx("span",{className:"me-1",children:"Already Added"}):e.jsx(K,{icon:Se})}),e.jsxs(de,{visible:j,onClose:()=>h(!1),children:[e.jsx(me,{children:e.jsx(ue,{children:"Add Item"})}),p&&e.jsx(k,{color:"danger",children:p}),d&&e.jsx(k,{color:"success",children:d}),e.jsx(he,{children:e.jsxs(le,{children:[e.jsx(U,{type:"text",placeholder:"From",className:"mb-3",floatingLabel:"From",id:"from",onChange:c,value:r.from,required:!0,readOnly:!0}),e.jsx(V,{placeholder:"Items List",className:"mb-3 justify-content-center h-50",floatingLabel:"Items List",id:"items",rows:5,value:Array.isArray(r.items)?r.items.map((n,s)=>`${s+1}. ${n.itemName} (Quantity: ${n.quantity})`).join(`
`):r.items,readOnly:!0}),e.jsxs(pe,{placeholder:"Warehouse",className:"mb-3",floatingLabel:"Warehouse",id:"warehouse",onChange:c,value:r.warehouse,required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),N.map(n=>e.jsx("option",{value:n._id,children:n.warehouseName},n._id))]})]})}),e.jsxs(fe,{children:[e.jsx(E,{color:"secondary",variant:"outline",onClick:()=>h(!1),children:"Close"}),e.jsx(E,{color:"primary",variant:"outline",onClick:v,children:"Add Item"})]})]})]})},ne=sessionStorage.getItem("accessToken"),Ue="http://localhost:5057";M.create({baseURL:Ue,withCredentials:!0,headers:{"Content-Type":"application/json",...ne&&{Authorization:`Bearer ${ne}`}}});const He=({onAddItem:t})=>{const[m,y]=a.useState([]),[u,d]=a.useState(1),[l,j]=a.useState(null),[h,p]=a.useState(!0),[i,N]=a.useState(""),[x,w]=a.useState([]),r=10,[f,c]=a.useState([{id:1,PoNumber:"123456",from:"Supplier A",items:[{itemName:"Item 1",quantity:10},{itemName:"Item 2",quantity:5}]},{id:2,PoNumber:"563424",from:"Supplier B",items:[{itemName:"Item 1",quantity:8},{itemName:"Item 4",quantity:12},{itemName:"Item 5",quantity:12}]},{id:3,PoNumber:"56323224",from:"Supplier C",items:[{itemName:"Item 6",quantity:8},{itemName:"Item 7",quantity:12},{itemName:"Item 8",quantity:12},{itemName:"Item 9",quantity:12}]},{id:4,PoNumber:"56342234",from:"Supplier D",items:[{itemName:"Item 10",quantity:8},{itemName:"Item 11",quantity:8}]},{id:5,PoNumber:"563433334",from:"Supplier E",items:[{itemName:"Item 12",quantity:8},{itemName:"Item 13",quantity:8},{itemName:"Item 14",quantity:8},{itemName:"Item 15",quantity:8}]}]);if(a.useEffect(()=>{y(f),p(!1)},[]),a.useEffect(()=>{if(i==="")w(m);else{const o=m.filter(g=>{const I=g.PoNumber.toLowerCase().includes(i.toLowerCase()),S=g.from.toLowerCase().includes(i.toLowerCase()),L=g.items.some(_=>_.itemName.toLowerCase().includes(i.toLowerCase()));return I||S||L});w(o),d(1),o.length===0?j("No matching records found."):j(null)}},[i,m]),h)return e.jsx(B,{color:"primary",className:"mt-5 w-15 mx-auto justify-content-center"});const C=u*r,v=C-r;m.slice(v,C);const n=Math.ceil(m.length/r),s=o=>{N(o.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mt-3",children:e.jsxs(G,{className:"w-50 mb-3",children:[e.jsx(U,{type:"text",placeholder:"Search by PO Number, Supplier, or Item Name",value:i,id:"searchInput",onChange:s}),e.jsx(X,{children:e.jsx(K,{icon:J})})]})}),e.jsxs(ye,{hover:!0,responsive:!0,size:"sm",className:"text-center",children:[e.jsx(je,{children:e.jsxs(Q,{children:[e.jsx(T,{children:"PO Number"}),e.jsx(T,{children:"From"}),e.jsx(T,{children:"Item Name"}),e.jsx(T,{children:"Quantity"}),e.jsx(T,{children:"Actions"})]})}),e.jsx(ge,{children:x.map((o,g)=>e.jsxs(Q,{children:[e.jsx(A,{className:"text-center",children:o.PoNumber}),e.jsx(A,{children:o.from}),e.jsx(A,{children:o.items.map(I=>e.jsx("div",{children:I.itemName},I.itemName))}),e.jsx(A,{children:o.items.map(I=>e.jsx("div",{children:I.quantity},I.itemName))}),e.jsx(A,{children:e.jsx(Me,{onAddItem:t,mockDataReiceving:f,item:o})})]},g))})]}),l&&e.jsx(k,{color:"danger",className:"text-center mt-5 w-75 mx-auto justify-content-center",children:l}),e.jsxs(be,{align:"center",children:[e.jsx(R,{disabled:u===1,onClick:()=>d(o=>Math.max(o-1,1)),children:"Previous"}),[...Array(n).keys()].map(o=>e.jsx(R,{active:o+1===u,onClick:()=>d(o+1),children:o+1},o+1)),e.jsx(R,{disabled:u===n,onClick:()=>d(o=>Math.min(o+1,n)),children:"Next"})]})]})},oe=sessionStorage.getItem("accessToken"),Qe="http://localhost:5057";M.create({baseURL:Qe,withCredentials:!0,headers:{"Content-Type":"application/json",...oe&&{Authorization:`Bearer ${oe}`}}});const ze=({items:t,loading:m,error:y})=>{const[u,d]=a.useState([]),[l,j]=a.useState(""),[h,p]=a.useState(null),i=10,[N,x]=a.useState(1),w=s=>{switch(s){case"Stocked":return"success";case"Out of Stock":return"danger";default:return"secondary"}};a.useEffect(()=>{d(t)},[t]),a.useEffect(()=>{if(l==="")d(t),p(null);else{const s=t.filter(o=>{const g=o.itemName.toLowerCase().includes(l.toLowerCase()),I=o.locations.some(S=>{const L=S.warehouse;return L.warehouseName.toLowerCase().includes(l.toLowerCase())||L.address.toLowerCase().includes(l.toLowerCase())});return g||I});d(s),x(1),s.length===0?p("No results found"):p(null)}},[l,t]);const r=s=>{j(s.target.value)},f=s=>{if(!s)return[];const o=new Map;return s.forEach(g=>{const I=g.warehouse._id;if(!o.has(I))o.set(I,{...g.warehouse,quantity:g.quantity,status:g.status||"Stocked"});else{const S=o.get(I);S.quantity+=g.quantity,o.set(I,S)}}),Array.from(o.values())};if(m)return e.jsx(B,{color:"primary",className:"text-center mt-5 w-75 mx-auto justify-content-center"});if(y)return e.jsxs(k,{color:"danger",className:"text-center mt-5 w-75 mx-auto justify-content-center",children:["Error: ",y]});const c=N*i,C=c-i,v=u.slice(C,c),n=Math.ceil(u.length/i);return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"m-3",children:e.jsxs(G,{className:"w-50 mb-3",children:[e.jsx(U,{type:"text",id:"search",value:l,onChange:r,placeholder:"Search by item name or warehouse..."}),e.jsx(X,{children:e.jsx(K,{icon:J})})]})}),e.jsxs("strong",{className:"m-3 align-self-start",children:["Total Items: ",v.length]}),h?e.jsx(k,{color:"warning",children:h}):e.jsxs(ye,{hover:!0,responsive:!0,striped:!0,className:"text-center",children:[e.jsx(je,{children:e.jsxs(Q,{children:[e.jsx(T,{scope:"col",children:"Item Name"}),e.jsx(T,{scope:"col",children:"Total Quantity"}),e.jsx(T,{scope:"col",children:"Warehouse Locations"}),e.jsx(T,{scope:"col",children:"Status"})]})}),e.jsx(ge,{children:v.map((s,o)=>e.jsxs(Q,{children:[e.jsx(A,{children:s.itemName}),e.jsx(A,{children:e.jsx("strong",{children:s.quantity})}),e.jsx(A,{children:e.jsx(q,{className:"locations-list ",children:f(s.locations).map((g,I)=>e.jsx(q,{className:"location-item",children:e.jsxs(q,{className:"location-details",children:[e.jsx("span",{className:"warehouse-name",children:g.warehouseName}),e.jsx("span",{className:"warehouse-address",children:g.address}),e.jsxs("span",{className:"quantity-badge",children:["Qty: ",g.quantity]})]})},I))})}),e.jsx(A,{children:e.jsx(ke,{color:w(s.status||(s.quantity>0?"Stocked":"Out of Stock")),children:s.status||(s.quantity>0?"Stocked":"Out of Stock")})})]},s._id||o))})]}),u.length===0&&!h&&e.jsx(k,{color:"warning",className:"text-center mt-5 w-75 mx-auto",children:"No items found."}),e.jsxs(be,{align:"center",children:[e.jsx(R,{disabled:N===1,onClick:()=>x(s=>Math.max(s-1,1)),children:"Previous"}),[...Array(n).keys()].map(s=>e.jsx(R,{active:s+1===N,onClick:()=>x(s+1),children:s+1},s+1)),e.jsx(R,{disabled:N===n,onClick:()=>x(s=>Math.min(s+1,n)),children:"Next"})]})]})},Ve=`
  .locations-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .location-item {
    display: flex;
    flex-direction: column;
    padding: 8px;
    background-color: #f8f9fa;
    border-radius: 4px;
    width: fit-content;

  }

  .location-details {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 4px;
  }

  .warehouse-name {
    font-weight: 500;
    color: #495057;
  }

  .warehouse-address {
    color: #6c757d;
    font-size: 0.9em;
    font-style: italic;
  }

  .quantity-badge {
    background-color: #e9ecef;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.85em;
    color: #495057;
  }

`,ve=document.createElement("style");ve.innerText=Ve;document.head.appendChild(ve);const ie=sessionStorage.getItem("accessToken"),_e="http://localhost:5057",ce=M.create({baseURL:_e,withCredentials:!0,headers:{"Content-Type":"application/json",...ie&&{Authorization:`Bearer ${ie}`}}}),ft=()=>{const[t,m]=a.useState([]),[y,u]=a.useState([]),[d,l]=a.useState(!1),[j,h]=a.useState(null),p=async()=>{l(!0);try{const r=await ce.get("/api/v1/warehouse/items");r.status===200&&m(r.data.data)}catch(r){h(r.response.data.message)}finally{l(!1)}},i=async()=>{try{l(!0);const r=await ce.get("/api/v1/warehouse/items/all");r.data.success&&u(r.data.data)}catch(r){h(r.message||"Failed to fetch items")}finally{l(!1)}};a.useEffect(()=>{i(),p()},[]);const N=r=>{m(f=>[...f,r]),u(f=>[...f,r]),i()},x=r=>{m(f=>f.filter(c=>c._id!==r)),u(f=>f.filter(c=>c._id!==r)),i()},w=r=>{m(f=>f.map(c=>c._id===r._id?r:c)),u(f=>f.map(c=>c._id===r._id?r:c)),i()};return e.jsx(e.Fragment,{children:e.jsxs(Z,{activeItemKey:"Warehouse Items Details",children:[e.jsxs(ee,{variant:"tabs",children:[e.jsx($,{itemKey:"Warehouse Items Details",children:"Warehouse Items Details"}),e.jsx($,{itemKey:"For Reiceve",children:"For Reiceve"}),e.jsx($,{itemKey:"Items",children:"Items"})]}),e.jsxs(Ee,{children:[e.jsx(D,{className:"p-3",itemKey:"Warehouse Items Details",children:e.jsx(Be,{warehousing:t,loading:d,error:j,onDeleteItem:x,onUpdateItem:w})}),e.jsx(D,{className:"p-3",itemKey:"For Reiceve",children:e.jsxs(te,{children:[e.jsx(F,{children:"Item Reicevig"}),e.jsx(He,{onAddItem:N})]})}),e.jsx(D,{className:"p-3",itemKey:"Items",children:e.jsxs(te,{children:[e.jsx(F,{children:"Items"}),e.jsx(ze,{items:y,loading:d,error:j})]})})]})]})})};export{ft as default};
