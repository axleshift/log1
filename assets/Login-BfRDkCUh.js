import{r as a,i as S,k as I,j as e}from"./index-ROFYVZSB.js";import{a as N}from"./index-DW_MHI2K.js";import{C as w,a as p}from"./index.esm-BM_BWR5J.js";import{C as x,a as h}from"./CRow-CJcrR-Hd.js";import{C as U}from"./CCardGroup-CAqlA2n3.js";import{C as k}from"./CCard-CY27pPNB.js";import{C as R}from"./CCardBody-D_8Vsxmt.js";import{C as E}from"./CForm-DG9jDYNX.js";import{C as g,a as C}from"./CInputGroupText-MlH_-xN7.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{C as f}from"./CFormInput-GqhhVFAX.js";import{c as P}from"./cil-lock-locked-DmxpJbVL.js";import{a as T}from"./CButton-B6XfsDmw.js";const q="http://localhost:5057",A=N.create({baseURL:q,withCredentials:!0}),X=()=>{const[o,j]=a.useState(""),[t,y]=a.useState(""),[n,i]=a.useState(!1),[c,l]=a.useState(""),b=S(),L=I(),v=async r=>{var m,d,u;r.preventDefault(),i(!0),l("");try{const s=await A.post("/api/v1/user/login",{username:o,password:t});console.log("Login successful:",s.data),sessionStorage.setItem("accessToken",s.data.accessToken),sessionStorage.setItem("email",s.data.user.email),sessionStorage.setItem("user",JSON.stringify(s)),L({type:"set",user:{username:s.data.user.username,role:s.data.user.role}}),b("/dashboard")}catch(s){console.error("Login error:",((m=s.response)==null?void 0:m.data)||s.message),l(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"An error occurred during login")}finally{i(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(w,{children:e.jsx(x,{className:"justify-content-center",children:e.jsx(h,{md:4,sm:2,children:e.jsx(U,{children:e.jsx(k,{className:"p-4",children:e.jsx(R,{children:e.jsxs(E,{onSubmit:v,children:[c&&e.jsx("div",{className:"text-danger mb-3",children:c}),e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(g,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(p,{icon:G})}),e.jsx(f,{type:"text",placeholder:"Username",autoComplete:"off",id:"Username",required:!0,value:o,onChange:r=>j(r.target.value)})]}),e.jsxs(g,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(p,{icon:P})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"off",id:"password",required:!0,value:t,onChange:r=>y(r.target.value)})]}),e.jsx(x,{children:e.jsx(h,{xs:6,children:e.jsx(T,{color:"primary",className:"px-4",type:"submit",disabled:n,children:n?"Logging in...":"Login"})})})]})})})})})})})})};export{X as default};
