import{r as a,i as N,k as S,j as e}from"./index-DegyTHJB.js";import{a as w}from"./axios-CCb-kr4I.js";import{C as I,a as p}from"./index.esm-BJ5D7Ll7.js";import{C as x}from"./CRow-B3NWguiz.js";import{C as h}from"./CCol-DdnTt7MC.js";import{C as k}from"./CCardGroup-5d9HQsuf.js";import{C as U,a as R}from"./CCardBody-Bl0Mqg_u.js";import{C as E}from"./CForm-Dwdouy1D.js";import{C as g,a as C,b as f}from"./CInputGroupText-CbCuM1Pv.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{c as P}from"./cil-lock-locked-DmxpJbVL.js";import{a as T}from"./CButton-BbZPCYw4.js";const q="https://backend-log1.axleshift.com/",A=w.create({baseURL:q,withCredentials:!0}),W=()=>{const[o,j]=a.useState(""),[t,y]=a.useState(""),[n,i]=a.useState(!1),[c,l]=a.useState(""),b=N(),L=S(),v=async r=>{var d,m,u;r.preventDefault(),i(!0),l("");try{const s=await A.post("/api/v1/user/login",{username:o,password:t});console.log("Login successful:",s.data),sessionStorage.setItem("accessToken",s.data.accessToken),sessionStorage.setItem("user",JSON.stringify(s)),L({type:"set",user:{username:s.data.user.username,role:s.data.user.role}}),b("/dashboard")}catch(s){console.error("Login error:",((d=s.response)==null?void 0:d.data)||s.message),l(((u=(m=s.response)==null?void 0:m.data)==null?void 0:u.message)||"An error occurred during login")}finally{i(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(I,{children:e.jsx(x,{className:"justify-content-center",children:e.jsx(h,{md:4,sm:2,children:e.jsx(k,{children:e.jsx(U,{className:"p-4",children:e.jsx(R,{children:e.jsxs(E,{onSubmit:v,children:[c&&e.jsx("div",{className:"text-danger mb-3",children:c}),e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(g,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(p,{icon:G})}),e.jsx(f,{type:"text",placeholder:"Username",autoComplete:"off",id:"Username",required:!0,value:o,onChange:r=>j(r.target.value)})]}),e.jsxs(g,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(p,{icon:P})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"off",id:"password",required:!0,value:t,onChange:r=>y(r.target.value)})]}),e.jsx(x,{children:e.jsx(h,{xs:6,children:e.jsx(T,{color:"primary",className:"px-4",type:"submit",disabled:n,children:n?"Logging in...":"Login"})})})]})})})})})})})})};export{W as default};
