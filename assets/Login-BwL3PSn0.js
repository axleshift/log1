import{r as a,i as w,k as N,j as e}from"./index-BrvXrex2.js";import{a as I}from"./axios-CCb-kr4I.js";import{C as S,a as u}from"./index.esm-BTbanNbl.js";import{C as x}from"./CRow-CuWHSeDx.js";import{C as h}from"./CCol-1VqW7y5Z.js";import{C as U}from"./CCardGroup-BKEzZA3d.js";import{C as k,a as R}from"./CCardBody-De-PDkOs.js";import{C as E}from"./CForm-BUOK6uYT.js";import{C,a as g}from"./CInputGroupText-BjBONFp1.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{C as f}from"./CFormInput-Cw6oxuti.js";import{c as P}from"./cil-lock-locked-DmxpJbVL.js";import{a as T}from"./CButton-C-w-GP-W.js";const q="http://localhost:5057/api",A=I.create({baseURL:q,withCredentials:!0}),X=()=>{const[o,j]=a.useState(""),[t,y]=a.useState(""),[n,i]=a.useState(!1),[c,l]=a.useState(""),b=w(),L=N(),v=async r=>{var d,m,p;r.preventDefault(),i(!0),l("");try{const s=await A.post("/user/login",{username:o,password:t});console.log("Login successful:",s.data),L({type:"set",user:{username:s.data.user.username,role:s.data.user.role}}),localStorage.setItem("accessToken",s.data.accessToken),b("/dashboard")}catch(s){console.error("Login error:",((d=s.response)==null?void 0:d.data)||s.message),l(((p=(m=s.response)==null?void 0:m.data)==null?void 0:p.message)||"An error occurred during login")}finally{i(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(S,{children:e.jsx(x,{className:"justify-content-center",children:e.jsx(h,{md:4,sm:2,children:e.jsx(U,{children:e.jsx(k,{className:"p-4",children:e.jsx(R,{children:e.jsxs(E,{onSubmit:v,children:[c&&e.jsx("div",{className:"text-danger mb-3",children:c}),e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(C,{className:"mb-3",children:[e.jsx(g,{children:e.jsx(u,{icon:G})}),e.jsx(f,{type:"text",placeholder:"Username",autoComplete:"off",id:"Username",required:!0,value:o,onChange:r=>j(r.target.value)})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(g,{children:e.jsx(u,{icon:P})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"off",id:"password",required:!0,value:t,onChange:r=>y(r.target.value)})]}),e.jsx(x,{children:e.jsx(h,{xs:6,children:e.jsx(T,{color:"primary",className:"px-4",type:"submit",disabled:n,children:n?"Logging in...":"Login"})})})]})})})})})})})})};export{X as default};
