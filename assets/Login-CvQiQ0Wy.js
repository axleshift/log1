import{r as a,i as N,k as S,j as e}from"./index-CUYqJ0e2.js";import{a as w}from"./axios-CCb-kr4I.js";import{C as I,a as u}from"./index.esm-aRa2igHs.js";import{C as x}from"./CRow-QyU2YaSl.js";import{C as h}from"./CCol-CQMEJqV0.js";import{C as U}from"./CCardGroup-HptjKUH9.js";import{C as k,a as R}from"./CCardBody-BMieBOwh.js";import{C as E}from"./CForm-Bd2jm3fC.js";import{C,a as g}from"./CInputGroup-C1etAkOx.js";import{C as f}from"./CInputGroupText-gBC9_HVB.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{c as P}from"./cil-lock-locked-DmxpJbVL.js";import{a as T}from"./CButton-9Gq5EYxH.js";const q="http://localhost:5057",A=w.create({baseURL:q,withCredentials:!0}),X=()=>{const[o,j]=a.useState(""),[t,y]=a.useState(""),[n,i]=a.useState(!1),[c,l]=a.useState(""),b=N(),L=S(),v=async r=>{var d,m,p;r.preventDefault(),i(!0),l("");try{const s=await A.post("/api/v1/user/login",{username:o,password:t});console.log("Login successful:",s.data),sessionStorage.setItem("accessToken",s.data.accessToken),sessionStorage.setItem("user",JSON.stringify(s)),L({type:"set",user:{username:s.data.user.username,role:s.data.user.role}}),b("/dashboard")}catch(s){console.error("Login error:",((d=s.response)==null?void 0:d.data)||s.message),l(((p=(m=s.response)==null?void 0:m.data)==null?void 0:p.message)||"An error occurred during login")}finally{i(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(I,{children:e.jsx(x,{className:"justify-content-center",children:e.jsx(h,{md:4,sm:2,children:e.jsx(U,{children:e.jsx(k,{className:"p-4",children:e.jsx(R,{children:e.jsxs(E,{onSubmit:v,children:[c&&e.jsx("div",{className:"text-danger mb-3",children:c}),e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(C,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(u,{icon:G})}),e.jsx(g,{type:"text",placeholder:"Username",autoComplete:"off",id:"Username",required:!0,value:o,onChange:r=>j(r.target.value)})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(u,{icon:P})}),e.jsx(g,{type:"password",placeholder:"Password",autoComplete:"off",id:"password",required:!0,value:t,onChange:r=>y(r.target.value)})]}),e.jsx(x,{children:e.jsx(h,{xs:6,children:e.jsx(T,{color:"primary",className:"px-4",type:"submit",disabled:n,children:n?"Logging in...":"Login"})})})]})})})})})})})})};export{X as default};
