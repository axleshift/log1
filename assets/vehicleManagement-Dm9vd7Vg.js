import{A as G,r as n,j as e,k as B,m as _,D as se}from"./index-DYVnpWz4.js";import{F as Y,n as pe,o as he,h as re,a as le,p as ne,q as fe,r as be}from"./index-w3JmnCJB.js";import{a as A}from"./CButton-BV9fJGGb.js";import{C as K,a as O,b as Q,c as J}from"./CModalHeader-BReAl0Mf.js";import{C as ie}from"./CModalTitle-CeAWGCz4.js";import{C as q}from"./CAlert-QKOAw-qh.js";import{C as oe}from"./CForm-D0gTHKK-.js";import{C as $}from"./CInputGroup-yF6ctRaz.js";import{C as y}from"./CFormInput-jQ33qRuY.js";import{C as z}from"./CFormSelect-C99cFRrR.js";import{C as M}from"./CContainer-BPQkFBJZ.js";import{C as ce}from"./CInputGroupText-tHLLF6B9.js";import{C as de,a as ue,b as me,c as ge}from"./CAccordionHeader-Banxblnf.js";import{C as S,a as je}from"./DefaultLayout-BpkOyKEv.js";import{C as ye,a as U}from"./CPaginationItem-B5YNGF-y.js";import{C as Ce,a as Ne,b as Z,c as ee}from"./CTabList-D6_uWukU.js";import{C as ae}from"./CCard-AvlTtjdo.js";import{C as te}from"./CCardBody-CcMW1lXX.js";import"./index.esm-B2en4ce3.js";import"./1-BFe6Q1cY.js";import"./cil-user-Ddrdy7PS.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const Se=({onAddVehicle:c})=>{const{showSuccess:k,showError:g}=G(),[w,D]=n.useState(!1),[m,b]=n.useState(!1),[L,T]=n.useState(null),[j,h]=n.useState(null),[t,C]=n.useState(!1),o={idNum:Math.floor(Math.random()*1e6).toString(),brand:"",model:"",year:"",regisExprationDate:"",regisNumber:"",capacity:"",fuelType:"",currentMileage:"",status:"available"},[u,r]=n.useState(o),d=a=>{const{id:s,value:l}=a.target;r(x=>({...x,[s]:l}))},f=[{label:"Van",value:"van"},{label:"Pickup Truck",value:"pickup"},{label:"Box Truck",value:"box"},{label:"Straight Truck",value:"straight"},{label:"Semi-Trailer Trucks",value:"semi"},{label:"Refrigerated Trucks",value:"refrigerated"},{label:"Tanker Trucks",value:"tanker"},{label:"Flatbed Trucks",value:"flatbed"}],I=[{label:"Diesel",value:"Diesel"},{label:"Gasoline",value:"Gasoline"}],E=async a=>{var l,x,p,R;a.currentTarget.checkValidity()===!1&&(a.preDefault(),a.stopPropagation()),D(!0),C(!0);try{const v=await _.post("api/v1/vehicle",u);v.data.success&&(k(v.data.message),c(v.data.data),setTimeout(()=>{r(o),C(!1),D(!1),b(!1)},2e3))}catch(v){g(((x=(l=v.response)==null?void 0:l.data)==null?void 0:x.message)||v.message),T(((R=(p=v.response)==null?void 0:p.data)==null?void 0:R.message)||v.message),setTimeout(()=>{T(null)},2e3)}C(!1)},V=new Date().getFullYear(),N=1990,i=new Date().toISOString().split("T")[0];return e.jsx(e.Fragment,{children:t?e.jsx(B,{color:"primary",size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsxs(A,{color:"primary",variant:"outline",onClick:()=>b(!0),children:[e.jsx(Y,{icon:pe})," Add Vehicle"]}),e.jsxs(K,{visible:m,onClose:()=>b(!1),size:"lg",children:[e.jsx(O,{closeButton:!0,children:e.jsx(ie,{children:"Add Vehicle"})}),L&&e.jsx(q,{color:"danger",className:"m-3",children:L}),j&&e.jsx(q,{color:"success",className:"m-3",children:j}),e.jsx(Q,{children:e.jsxs(oe,{noValidate:!0,validated:w,children:[e.jsxs($,{children:[e.jsx(y,{className:"mb-3",floatingLabel:"ID Number",placeholder:"ID Number",type:"text",id:"idNum",label:"ID Number",value:u.idNum,disabled:!0}),e.jsx(y,{className:"mb-3",floatingLabel:"Brand",placeholder:"Brand",type:"text",id:"brand",label:"Brand",autoComplete:"off",required:!0,value:u.brand,onChange:d}),e.jsx(y,{className:"mb-3",floatingLabel:"Model",placeholder:"Model",type:"text",id:"model",label:"Model",autoComplete:"off",required:!0,value:u.model,onChange:d})]}),e.jsxs($,{children:[e.jsx(y,{type:"number",className:"mb-3",floatingLabel:"Year",placeholder:"Year",id:"year",value:u.year,required:!0,min:N,max:V,onChange:d,onBlur:a=>{const s=parseInt(a.target.value);s>=N&&s<=V&&!isNaN(s)||(alert(`Please enter a year between ${N} and ${V}`),r({...u,year:N}))}}),e.jsx(y,{className:"mb-3",floatingLabel:"Registration Number",placeholder:"Registration Number",type:"text",id:"regisNumber",label:"Registration Number",autoComplete:"off",required:!0,value:u.regisNumber,onChange:d}),e.jsx(y,{className:"mb-3",floatingLabel:"Registration Expiration Date",placeholder:"Registration Expiration Date",type:"date",id:"regisExprationDate",label:"Registration Expiration Date",autoComplete:"off",required:!0,min:i,value:u.regisExprationDate,onChange:d})]}),e.jsxs($,{children:[e.jsx(z,{className:"mb-3",floatingLabel:"Vehicle Type",placeholder:"Vehicle Type",id:"type",value:u.type,required:!0,onChange:d,options:[{label:"Select Vehicle Type",value:""},...f]}),e.jsx(y,{className:"mb-2",type:"number",floatingLabel:"Capacity",placeholder:"Capacity",id:"capacity",label:"Capacity",autoComplete:"off",required:!0,min:"0",value:u.capacity,onChange:d}),e.jsx(z,{className:"mb-3",floatingLabel:"Fuel Type",placeholder:"Fuel Type",id:"fuelType",value:u.fuelType,required:!0,onChange:d,options:[{label:"Select Fuel Type",value:""},...I]})]}),e.jsx(y,{className:"mb-3",floatingLabel:"Current Mileage",placeholder:"Current Mileage",type:"number",id:"currentMileage",label:"Current Mileage",autoComplete:"off",required:!0,value:u.currentMileage,min:"0",max:"100000000000",onChange:d})]})}),e.jsxs(J,{children:[e.jsx(A,{color:"secondary",variant:"outline",disabled:t,onClick:()=>{b(!1),r(o),D(!1),T(null)},children:t?e.jsx(B,{color:"secondary",size:"sm"}):"Cancel"}),e.jsx(A,{color:"primary",variant:"outline",disabled:t,onClick:E,children:t?e.jsx(B,{color:"primary",size:"sm"}):"Save"})]})]})]})})},De=({vehicle:c,onUpdateVehicle:k})=>{const{showSuccess:g,showError:w}=G(),[D,m]=n.useState(!1),[b,L]=n.useState(null),[T,j]=n.useState(null),[h,t]=n.useState(!1),[C,o]=n.useState(!1),u={idNum:c.idNum,brand:c.brand,model:c.model,year:c.year,regisExprationDate:c.regisExprationDate,regisNumber:c.regisNumber,type:c.type,capacity:c.capacity,fuelType:c.fuelType,currentMileage:c.currentMileage},[r,d]=n.useState(u),f=s=>{const{id:l,value:x}=s.target;d(p=>({...p,[l]:x}))},I=[{label:"Van",value:"van"},{label:"Pickup Truck",value:"pickup"},{label:"Box Truck",value:"box"},{label:"Straight Truck",value:"straight"},{label:"Semi-Trailer Trucks",value:"semi"},{label:"Refrigerated Trucks",value:"refrigerated"},{label:"Tanker Trucks",value:"tanker"},{label:"Flatbed Trucks",value:"flatbed"}],E=[{label:"Diesel",value:"Diesel"},{label:"Gasoline",value:"Gasoline"}],V=async s=>{var x,p,R,v;s.preventDefault(),t(!0),s.currentTarget.checkValidity()===!1&&(s.preDefault(),s.stopPropagation()),o(!0),t(!0);try{const F=new Date;F.setHours(0,0,0,0);const H=new Date(r.regisExprationDate);if(H.setHours(0,0,0,0),H<=F){j("Registration date must be in the future"),setIsLoading(!1);return}const P=await _.put(`api/v1/vehicle/${c._id}`,r);P.data.success&&(g(P.data.message),k(P.data.data),setTimeout(()=>{t(!1),o(!1),m(!1)},2e3))}catch(F){w(((p=(x=F.response)==null?void 0:x.data)==null?void 0:p.message)||F.message),j(((v=(R=F.response)==null?void 0:R.data)==null?void 0:v.message)||F.message),setTimeout(()=>{j(null)},2e3)}finally{t(!1)}},N=new Date().getFullYear(),i=1990,a=new Date().toISOString().split("T")[0];return e.jsxs(e.Fragment,{children:[e.jsxs(A,{color:"primary",variant:"outline",disabled:h,onClick:()=>m(!0),className:"me-2",children:[h?e.jsx(B,{size:"sm"}):e.jsx(Y,{icon:he})," Update"]}),e.jsxs(K,{visible:D,onClose:()=>m(!1),size:"lg",children:[e.jsx(O,{closeButton:!0,children:e.jsx(ie,{children:"Update Vehicle"})}),T&&e.jsx(q,{color:"danger",className:"m-3",children:T}),b&&e.jsx(q,{color:"success",className:"m-3",children:b}),e.jsx(Q,{children:e.jsxs(oe,{noValidate:!0,validated:C,children:[e.jsxs($,{children:[e.jsx(y,{className:"mb-3",floatingLabel:"ID Number",placeholder:"ID Number",type:"text",id:"idNum",label:"ID Number",value:r.idNum,disabled:!0}),e.jsx(y,{className:"mb-3",floatingLabel:"Brand",placeholder:"Brand",type:"text",id:"brand",label:"Brand",required:!0,value:r.brand,onChange:f}),e.jsx(y,{className:"mb-3",floatingLabel:"Model",placeholder:"Model",type:"text",id:"model",label:"Model",required:!0,value:r.model,onChange:f})]}),e.jsxs($,{children:[e.jsx(y,{type:"number",className:"mb-3",floatingLabel:"Year",placeholder:"Year",id:"year",value:r.year,required:!0,min:i,max:N,onChange:f,onBlur:s=>{const l=parseInt(s.target.value);l>=i&&l<=N&&!isNaN(l)||(alert(`Please enter a year between ${i} and ${N}`),d({...r,year:i}))}}),e.jsx(y,{className:"mb-3",floatingLabel:"Registration Number",placeholder:"Registration Number",type:"text",id:"regisNumber",label:"Registration Number",required:!0,value:r.regisNumber,onChange:f}),e.jsx(y,{className:"mb-3",floatingLabel:"Registration Expiration Date",placeholder:"Registration Expiration Date",type:"date",id:"regisExprationDate",label:"Registration Expiration Date",autoComplete:"off",required:!0,min:a,value:r.regisExprationDate.split("T")[0],onChange:f})]}),e.jsxs($,{children:[e.jsx(z,{className:"mb-3",floatingLabel:"Vehicle Type",placeholder:"Vehicle Type",id:"type",value:r.type,required:!0,onChange:f,options:[{label:"Select Vehicle Type",value:""},...I]}),e.jsx(y,{className:"mb-2",type:"number",floatingLabel:"Capacity",placeholder:"Capacity",id:"capacity",label:"Capacity",required:!0,min:"0",value:r.capacity,onChange:f}),e.jsx(z,{className:"mb-3",floatingLabel:"Fuel Type",placeholder:"Fuel Type",id:"fuelType",label:"Fuel Type",value:r.fuelType,required:!0,onChange:f,options:[{label:"Select Fuel Type",value:""},...E]})]}),e.jsx(y,{className:"mb-3",floatingLabel:"Current Mileage",placeholder:"Current Mileage",type:"number",id:"currentMileage",label:"Current Mileage",required:!0,min:"0",max:"100000000000",value:r.currentMileage,onChange:f})]})}),e.jsxs(J,{children:[e.jsx(A,{color:"secondary",variant:"outline",disabled:h,onClick:()=>{m(!1),j(null),d(u),o(!1)},children:h?e.jsx(B,{size:"sm",color:"secondary"}):"Cancel"}),e.jsx(A,{color:"success",variant:"outline",disabled:h,onClick:V,children:h?e.jsx(B,{size:"sm",color:"success"}):"Save Changes"})]})]})]})},Te=({vehicle:c,error:k,loading:g,onDeleteVehicle:w,onUpdateVehicle:D})=>{const[m,b]=n.useState([]),L=se(),T=["manager","admin"],[j,h]=n.useState(null),[t,C]=n.useState(""),[o,u]=n.useState(1),[r]=n.useState(10),d=o*r,f=d-r,I=m.slice(f,d),E=Math.ceil(m.length/r);n.useEffect(()=>{b(c)},[c]),n.useEffect(()=>{(()=>{if(u(1),t==="")b(c);else{const s=c.filter(l=>{var x,p,R,v,F,H,P,W,X;return((x=l.idNum)==null?void 0:x.toString().includes(t))||((p=l.brand)==null?void 0:p.toLowerCase().includes(t.toLowerCase()))||((R=l.model)==null?void 0:R.toLowerCase().includes(t.toLowerCase()))||((v=l.year)==null?void 0:v.toString().includes(t))||((F=l.regisExprationDate)==null?void 0:F.toLowerCase().includes(t.toLowerCase()))||((H=l.type)==null?void 0:H.toLowerCase().includes(t.toLowerCase()))||((P=l.regisNumber)==null?void 0:P.toLowerCase().includes(t.toLowerCase()))||((W=l.capacity)==null?void 0:W.toString().includes(t))||(((X=N.find(xe=>xe.value===l.status))==null?void 0:X.label)||"").toLowerCase().includes(t.toLowerCase())});b(s),s.length===0?h("No vehicles found"):h(null)}})()},[t,c]);const V=a=>{switch(a){case"available":return"green";case"in_use":return"red";case"maintenance":return"orange";case"inspection":return"yellow";case"forRegistration":return"grey";default:return"black"}},N=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"},{value:"inactive",label:"Inactive"},{value:"inspection",label:"Inspection"},{value:"forRegistration",label:"For Registration"}];if(c.length===0)return e.jsx(q,{color:"danger",className:"text-center justify-content-center",children:"No vehicles found"});const i=a=>{if(!a)return{text:"No expiration date",badge:"secondary"};const s=new Date;s.setHours(0,0,0,0);const l=new Date(a);l.setHours(0,0,0,0);const x=l.getTime()-s.getTime(),p=Math.ceil(x/(1e3*60*60*24));if(p<0){const R=Math.abs(p);return{text:`Expired ${R} ${R===1?"day":"days"} ago`,badge:"danger"}}return p===0?{text:"Expires Today",badge:"danger"}:p<=14?{text:`Expires in ${p} ${p===1?"day":"days"}`,badge:"warning"}:{text:"Registered",badge:"success"}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mt-3",children:e.jsxs($,{className:"w-50 mb-3",children:[e.jsx(y,{type:"text",placeholder:"Search vehicles",id:"search",value:t,onChange:a=>C(a.target.value),className:"w-50 me-2 "}),e.jsx(ce,{children:e.jsx(Y,{icon:re})})]})}),e.jsx(de,{className:"m-2",children:I.map((a,s)=>e.jsxs(ue,{children:[e.jsxs(me,{className:"d-flex justify-content-between",children:[e.jsx(M,{children:e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{children:["Registration Number: ",e.jsx("strong",{children:a.regisNumber})]}),e.jsxs("li",{children:["Driver:"," ",e.jsx("strong",{children:a.assignedDriver?`${a.assignedDriver.driverName} - ${a.assignedDriver.licenseNumber}`:"Not assigned"})]}),e.jsxs("li",{children:["Registration expiration Date:"," ",e.jsx("strong",{children:a.regisExprationDate?e.jsxs(e.Fragment,{children:[new Date(a.regisExprationDate).toLocaleDateString()," ",e.jsx(le,{color:i(a.regisExprationDate).badge,children:i(a.regisExprationDate).text})]}):"No expiration date"})]})]})}),e.jsxs(M,{className:"d-flex justify-content-end",children:[e.jsx(Y,{icon:ne,color:V(a.status),className:"m-2 float-end"}),e.jsx("small",{className:"m-2 float-end",children:N.find(l=>l.value===a.status).label})]})]}),e.jsxs(ge,{children:[e.jsxs(S,{children:["ID: ",a.idNum]}),e.jsxs(S,{children:["Brand: ",a.brand]}),e.jsxs(S,{children:["Model: ",a.model]}),e.jsxs(S,{children:["Year: ",a.year]}),e.jsxs(S,{children:["Type: ",a.type]}),e.jsxs(S,{children:["Capacity: ",a.capacity]}),e.jsxs(S,{children:["Status: ",N.find(l=>l.value===a.status).label]}),e.jsxs(S,{children:["Driver:"," ",a.assignedDriver?`${a.assignedDriver.driverName} - ${a.assignedDriver.licenseNumber}`:"Not assigned"]}),e.jsxs(S,{children:["Fuel Type: ",a.fuelType]}),e.jsxs(S,{children:["Current Mileage: ",a.currentMileage]}),e.jsxs(M,{className:"d-flex justify-content-end mt-3",children:[e.jsx(De,{vehicle:a,onUpdateVehicle:D}),T.includes(L)&&e.jsxs(A,{color:"danger",variant:"outline",onClick:()=>w(a._id),children:[e.jsx(Y,{icon:fe})," Delete"]})]})]})]},a._id||s))}),m.length>0&&e.jsxs(M,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs(M,{children:["Showing ",f+1," to ",Math.min(d,m.length)," ","of ",m.length," entries"]}),e.jsxs(ye,{className:"mt-3",children:[e.jsx(U,{disabled:o===1,onClick:()=>u(a=>Math.max(a-1,1)),children:"Previous"}),Array.from({length:E},(a,s)=>s+1).map(a=>e.jsx(U,{active:a===o,onClick:()=>u(a),children:a},a)),e.jsx(U,{disabled:o===E,onClick:()=>u(a=>Math.min(a+1,E)),children:"Next"})]})]}),j&&e.jsx(q,{color:"danger",className:"text-center justify-content-center",children:j})]})},ve=({restoredVehicle:c,onRestoreVehicle:k})=>{const[g,w]=n.useState(!1),{showSuccess:D,showError:m}=G(),[b,L]=n.useState(null),T=async()=>{var j,h;w(!0);try{const t=await _.patch(`api/v1/vehicle/restore/${c}`);t.data.success&&(D(t.data.message),k(t.data.data))}catch(t){m(((h=(j=t.response)==null?void 0:j.data)==null?void 0:h.message)||"Error restoring vehicle"),console.error("Error restoring vehicle:",t)}finally{w(!1)}};return e.jsx(A,{color:"success",variant:"outline",onClick:T,disabled:g,className:"mx-1",children:g?e.jsx(B,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{icon:be,className:"me-1"}),"Restore"]})})},we=({restoredVehicle:c,onRestoreVehicle:k})=>{const[g,w]=n.useState(""),[D,m]=n.useState([]),[b,L]=n.useState(null);n.useEffect(()=>{(()=>{if(g==="")m(c);else{const C=c.filter(o=>{var u,r,d,f,I,E,V,N,i;return((u=o.idNum)==null?void 0:u.toString().includes(g))||((r=o.brand)==null?void 0:r.toLowerCase().includes(g.toLowerCase()))||((d=o.model)==null?void 0:d.toLowerCase().includes(g.toLowerCase()))||((f=o.year)==null?void 0:f.toString().includes(g))||((I=o.regisExprationDate)==null?void 0:I.toLowerCase().includes(g.toLowerCase()))||((E=o.type)==null?void 0:E.toLowerCase().includes(g.toLowerCase()))||((V=o.regisNumber)==null?void 0:V.toLowerCase().includes(g.toLowerCase()))||((N=o.capacity)==null?void 0:N.toString().includes(g))||(((i=j.find(a=>a.value===o.status))==null?void 0:i.label)||"").toLowerCase().includes(g.toLowerCase())});m(C),C.length===0?L("No vehicles found"):L(null)}})()},[g,c]);const T=t=>{switch(t){case"available":return"green";case"in_use":return"red";case"maintenance":return"orange";case"inspection":return"yellow";case"forRegistration":return"grey";default:return"black"}},j=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"},{value:"inactive",label:"Inactive"},{value:"inspection",label:"Inspection"},{value:"forRegistration",label:"For Registration"}];if(D.length===0)return e.jsx(q,{color:"danger",className:"text-center justify-content-center",children:"No vehicles found to restore"});const h=t=>{if(!t)return{text:"No expiration date",badge:"secondary"};const C=new Date;C.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0);const u=o.getTime()-C.getTime(),r=Math.ceil(u/(1e3*60*60*24));if(r<0){const d=Math.abs(r);return{text:`Expired ${d} ${d===1?"day":"days"} ago`,badge:"danger"}}return r===0?{text:"Expires Today",badge:"danger"}:r<=14?{text:`Expires in ${r} ${r===1?"day":"days"}`,badge:"warning"}:{text:"Registered",badge:"success"}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mt-3",children:e.jsxs($,{className:"w-50 mb-3",children:[e.jsx(y,{type:"text",placeholder:"Search vehicles",id:"searchRestoredVehicles",value:g,onChange:t=>w(t.target.value),className:"w-50 me-2 "}),e.jsx(ce,{children:e.jsx(Y,{icon:re})})]})}),b&&e.jsx(q,{color:"danger",children:b}),e.jsx(de,{children:D.map(t=>e.jsxs(ue,{children:[e.jsxs(me,{className:"d-flex justify-content-between",children:[e.jsx(M,{children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Registration Number: ",e.jsx("strong",{children:t.regisNumber})]}),e.jsxs("li",{children:["Registration expiration Date:"," ",e.jsx("strong",{children:t.regisExprationDate?e.jsxs(e.Fragment,{children:[new Date(t.regisExprationDate).toISOString().split("T")[0]," ",e.jsx(le,{color:h(t.regisExprationDate).badge,children:h(t.regisExprationDate).text})]}):"No expiration date"})]})]})}),e.jsxs(M,{className:"d-flex justify-content-end",children:[e.jsx(Y,{icon:ne,color:T(t.status),className:"m-2 float-end"}),e.jsx("small",{className:"m-2 float-end",children:j.find(C=>C.value===t.status).label})]})]}),e.jsxs(ge,{children:[e.jsxs(S,{children:["Year: ",t.year]}),e.jsxs(S,{children:["Type: ",t.type]}),e.jsxs(S,{children:["Capacity: ",t.capacity]}),e.jsxs(S,{children:["Status: ",t.status]}),e.jsx(M,{className:"d-flex justify-content-end mt-3",children:e.jsx(ve,{restoredVehicle:t._id,onRestoreVehicle:k})})]})]},t._id))})]})},Je=()=>{const c=se(),k="admin",{showSuccess:g,showError:w}=G(),[D,m]=n.useState([]),[b,L]=n.useState(!0),[T,j]=n.useState(null),[h,t]=n.useState(null),[C,o]=n.useState(!1),[u,r]=n.useState([]);n.useEffect(()=>{d()},[]),n.useEffect(()=>{const i=()=>{const s=new Date;s.setHours(0,0,0,0),m(l=>l.map(x=>{const p=new Date(x.regisExprationDate);return p.setHours(0,0,0,0),p<=s&&x.status!=="forRegistration"?{...x,status:"forRegistration"}:x}))};i();const a=setInterval(i,24*60*60*1e3);return()=>clearInterval(a)},[]);const d=async()=>{var i,a;L(!0);try{const[s,l]=await Promise.all([_.get("api/v1/vehicle"),_.get("api/v1/vehicle/restored")]);m(s.data.data),r(l.data.data)}catch(s){w(((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.message)||"Error fetching data"),j(s.message)}finally{L(!1)}},f=i=>{t(i),o(!0)},I=async()=>{var i,a;try{await _.patch(`api/v1/vehicle/${h}`),m(s=>s.filter(l=>l._id!==h)),g("Vehicle deleted successfully"),o(!1),d()}catch(s){w(((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.message)||"Error deleting vehicle")}},E=i=>{m(a=>[...a,i])},V=i=>{r(a=>a.map(s=>s._id===i._id?i:s)),d()},N=i=>{m(a=>a.map(s=>s._id===i._id?i:s),d())};return b?e.jsx("div",{className:"text-center",children:e.jsx(B,{color:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"text-center",children:"Vehicle Management"}),e.jsx(M,{className:"m-3",children:e.jsx(Se,{onAddVehicle:E})}),e.jsxs(Ce,{activeItemKey:"Vehicle List",children:[e.jsxs(Ne,{variant:"tabs",children:[e.jsx(Z,{itemKey:"Vehicle List",children:"Vehicle List"}),e.jsx(Z,{itemKey:"Restore Vehicles",children:"Restore Vehicles"})]}),e.jsxs(je,{children:[e.jsx(ee,{itemKey:"Vehicle List",children:e.jsxs(ae,{children:[e.jsx(S,{children:"Vehicle List"}),e.jsx(te,{className:"md-3",children:e.jsx(Te,{vehicle:D,error:T,onDeleteVehicle:f,onUpdateVehicle:N,loading:b})})]})}),e.jsx(ee,{itemKey:"Restore Vehicles",children:c.includes(k)?e.jsxs(ae,{children:[e.jsx(S,{children:"Restore Vehicles"}),e.jsx(te,{className:"md-3",children:e.jsx(we,{restoredVehicle:u,onRestoreVehicle:V})})]}):e.jsx(q,{color:"danger",className:"text-center justify-content-center m-5",children:"You are not authorized to view this tab"})})]})]}),e.jsxs(K,{visible:C,onClose:()=>o(!1),alignment:"center",children:[e.jsx(O,{children:"Confirm Delete"}),e.jsx(Q,{children:"Are you sure you want to delete this vehicle?"}),e.jsxs(J,{children:[e.jsx(A,{color:"danger",variant:"outline",onClick:I,children:"Delete"}),e.jsx(A,{color:"secondary",variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})};export{Je as default};
